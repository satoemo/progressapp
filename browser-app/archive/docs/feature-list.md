# kintone進捗管理アプリv10.3.3 全機能詳細リスト

## 1. タブ機能とナビゲーション

### 1.1 タブマネージャー機能
- **実装箇所**: `src/ui/tabs/TabManager.ts`, `src/ui/tabs/TabTypes.ts`
- サイドバー式の縦型タブ表示
- 7つのタブ定義：進捗管理、シミュレーション、担当者別、リテイク表、香盤表、発注伝票、カット袋出力
- アクティブタブのハイライト表示と状態管理
- タブクリック時のイベント委譲処理
- アクセシビリティ対応（WAI-ARIA属性）
- タブ切り替えイベントのドメインイベント発火

### 1.2 タブ状態永続化
- **実装箇所**: `src/application/services/StateManagerService.ts`
- アクティブタブのLocalStorage保存
- ページリロード時のタブ状態復元
- ViewStateManagerとの連携

### 1.3 タブスタイリング
- **実装箇所**: `styles/components/sidebar.css`
- タブホバー時の色変更エフェクト
- アクティブタブの視覚的強調表示
- 縦型レイアウトでのタブ配置

## 2. テーブル機能（進捗管理表）

### 2.1 基本テーブル構造
- **実装箇所**: `src/ui/ProgressTable.ts`, `src/ui/base/BaseProgressTable.ts`
- 2層ヘッダー構造（グループヘッダー + フィールドヘッダー）
- 動的列幅調整とcolgroup管理
- 固定列機能（左側2列の固定表示）
- レスポンシブ対応の横スクロール

### 2.2 ソート機能
- **実装箇所**: テーブル全体
- 全フィールドでのクリックソート
- 昇順・降順の切り替え
- ソートアイコンの動的表示（▲▼）
- カット番号の独自ソート（CutNumberクラス使用）
- 数値・通貨・日付フィールドの適切な型別ソート

### 2.3 フィルタ機能
- **実装箇所**: `src/ui/filter/FilterDropdown.ts`, `src/ui/filter/FilterManager.ts`
- 右クリックでフィルタドロップダウン表示
- チェックボックス式の複数値選択
- フィルタ適用状況のアイコン表示（*）
- 空白値の特別処理（"(空白)"表示）
- リアルタイムフィルタリング

### 2.4 セル編集機能
- **実装箇所**: `src/ui/cell-editor/CellEditor.ts`, `src/ui/cell-editor/CellEditorFactory.ts`
- ダブルクリックでのインライン編集開始
- contenteditable使用の直接編集
- Enter確定・Escape取消し
- 数値フィールドの入力制限
- 編集中の視覚的フィードバック

### 2.5 ビューモード切り替え
- **実装箇所**: `src/ui/ViewMode.ts`
- 4つのビューモード：すべて、基本、進捗中心、工程別
- モード別フィールド表示の動的切り替え
- ビューモードボタンのアクティブ状態表示

### 2.6 状態保存・復元
- **実装箇所**: `src/ui/state/ViewStateManager.ts`
- ソート状態の保存・復元
- フィルタ状態の保存・復元
- スクロール位置の保存・復元
- ビューモードの保存・復元

## 3. ポップアップとドロップダウン

### 3.1 ベースポップアップ
- **実装箇所**: `src/ui/components/BasePopup.ts`
- 統一ポップアップ基底クラス
- 画面端での自動位置調整
- ESCキーでの閉じる機能
- 外部クリック検出での自動クローズ
- アクティブポップアップの排他制御

### 3.2 カレンダーポップアップ
- **実装箇所**: `src/ui/CalendarPopup.ts`
- 進捗フィールド用の日付入力
- HTML5 date inputの利用
- 今日ボタンでの現在日付設定
- 特殊値ボタン：「不要」「リテイク」
- クリアボタンでの値削除

### 3.3 ドロップダウンポップアップ
- **実装箇所**: `src/ui/DropdownPopup.ts`
- 情報フィールド用の候補値選択
- 既存値の自動収集と表示
- フリー入力との組み合わせ
- 候補値のクリック選択
- Enter確定・外部クリック保存

### 3.4 特殊フィールドポップアップ
- **実装箇所**: `src/ui/KenyoMultiSelectPopup.ts`, `src/ui/SpecialMultiSelectPopup.ts`
- 兼用フィールド用の複数選択
- 特殊フィールド用の複数選択
- チェックボックス形式の選択UI
- スラッシュ区切り値の生成

### 3.5 メモポップアップ
- **実装箇所**: `src/ui/components/MemoPopup.ts`
- セル右クリックでのメモ表示
- テキストエリアでのメモ編集
- メモ保存・削除機能
- メモインジケーター（*）の表示

## 4. データ管理機能

### 4.1 CQRS/EventSourcing
- **実装箇所**: `src/application/commands/`, `src/application/queries/`
- Command/Query分離アーキテクチャ
- ドメインイベント基盤
- イベント駆動でのデータ更新
- ReadModel最適化

### 4.2 状態管理
- **実装箇所**: `src/application/state/UnifiedStateManager.ts`
- アプリケーション状態の統一管理
- LocalStorageとの同期
- 状態変更の監視とイベント発火

### 4.3 リアルタイム同期
- **実装箇所**: `src/application/services/RealtimeSyncService.ts`
- デバウンス処理付きの自動保存
- 同期状態の視覚的フィードバック
- エラー時の再試行機構

## 5. PDF出力機能

### 5.1 統一PDF出力サービス
- **実装箇所**: `src/application/services/PDFExportService.ts`
- jsPDF + autoTableによる高品質PDF生成
- 列数自動判定によるページサイズ調整（A4/A3/A2/A1）
- M+フォント埋め込みによる日本語対応
- 単一テーブル・複数テーブル出力対応

### 5.2 フォント管理
- **実装箇所**: `src/ui/export/FontData.ts`
- M+ Regular/Boldフォントのbase64埋め込み
- フォントフォールバック機能
- 文字化け防止

### 5.3 出力カスタマイズ
- 用紙向き自動選択（横向き優先）
- ヘッダー・フッター自動生成
- ページ番号表示
- 縞模様の見やすいテーブル

## 6. UI/UX効果とアニメーション

### 6.1 ホバー効果
- **実装箇所**: `styles/features/progress-table/`
- テーブル行のホバーハイライト
- ボタンホバー時の色変更
- セルホバー時の透明度変更
- タブホバー時の背景色変更

### 6.2 クリック効果
- ボタンクリック時のアクティブ状態
- セル編集開始時の視覚的フィードバック
- ソートアイコンのアニメーション

### 6.3 ローディング表示
- **実装箇所**: `styles/main.css`
- スピナーアニメーション（回転）
- ローディングオーバーレイ
- 同期状態インジケーター

### 6.4 レスポンシブデザイン
- **実装箇所**: `styles/features/progress-table/responsive.css`
- 768px以下での列幅調整
- モバイル向けタッチ操作対応
- スクロールバーのカスタマイズ

## 7. フィールド編集機能

### 7.1 進捗フィールド編集
- ダブルクリックでカレンダーポップアップ
- 日付・特殊値（不要/リテイク）の入力
- 進捗状況による色分け表示

### 7.2 情報フィールド編集
- ドロップダウンによる候補値選択
- 担当者・作監・事務所フィールドの統一UI
- 既存データからの候補値自動収集

### 7.3 数値フィールド編集
- 数値のみ入力制限
- 通貨フォーマットでの表示
- 枚数・コスト情報の適切な処理

## 8. 各ビューの固有機能

### 8.1 進捗管理表ビュー
- 全フィールド表示の包括的テーブル
- オートフィル機能（セル右下ドラッグでの値コピー）
- 新規カット追加機能
- ダミーデータ生成機能

### 8.2 担当者別表示ビュー
- **実装箇所**: `src/ui/staff/StaffView.ts`
- 役割別タブ（LO担当、原画担当、動画担当など）
- 担当者ごとの進捗率計算・表示
- プログレスバーによる視覚化
- フィルタ・ソート機能付きテーブル
- LO作監・原画作監の複合表示

### 8.3 シミュレーション表示ビュー
- **実装箇所**: `src/ui/simulation/SimulationView.ts`
- プロジェクト期間設定
- ノルマ表の動的生成
- 作業予定入力機能
- 進捗予測グラフ（テキストベース）
- 日別作業予定表

### 8.4 リテイク表ビュー
- **実装箇所**: `src/ui/retake/RetakeView.ts`
- リテイク対象カットの一覧表示
- リテイク状況の管理
- 担当者別リテイク集計

## 9. 状態管理機能

### 9.1 ビュー状態管理
- **実装箇所**: `src/ui/state/ViewStateManager.ts`
- シングルトンパターンでの状態管理
- ビュー別状態の個別保存
- JSON形式でのLocalStorage保存
- 状態復元時のバリデーション

### 9.2 スクロール状態管理
- テーブルスクロール位置の自動保存
- デバウンス処理による保存頻度制限
- タブ切り替え時の位置復元

### 9.3 フィルタ状態管理
- フィールド別フィルタ設定の保存
- 複数値フィルタの状態管理
- フィルタ解除・再適用機能

## 10. その他の詳細機能

### 10.1 オートフィル機能
- **実装箇所**: `src/ui/autofill/AutoFillManager.ts`
- Excel風のセル右下フィルハンドル表示
- ドラッグによる値の一括コピー
- 編集可能セルの自動判定
- バッチ更新処理による効率的なデータ更新

### 10.2 キーボードナビゲーション
- Tab/Shift+Tabでのフォーカス移動
- Enter/Escapeキーでの編集確定・キャンセル
- 矢印キーでのセル移動（一部実装）

### 10.3 エラーハンドリング
- ネットワークエラー時の自動リトライ
- ユーザーフレンドリーなエラーメッセージ
- エラー状況のロギング

### 10.4 パフォーマンス最適化
- 仮想スクロール準備（大量データ対応）
- デバウンス処理による不要な処理削減
- イベント委譲による効率的なイベント処理
- メモ化による計算結果キャッシュ

### 10.5 アクセシビリティ対応
- WAI-ARIA属性の適切な設定
- キーボード操作の完全対応
- スクリーンリーダー対応のラベル設定
- ハイコントラストモード対応

### 10.6 同期インジケーター
- **実装箇所**: `src/ui/components/SyncIndicator.ts`
- 右上固定での同期状態表示
- 保存中・完了・エラーの状態別表示
- 自動フェードアウト機能

### 10.7 CSS変数システム
- **実装箇所**: `styles/core/`
- 統一されたカラーパレット
- レスポンシブ対応のブレークポイント
- コンポーネント間で共有される間隔・サイズ定義
- テーマ切り替え準備

## 細分化された詳細UI/UX機能

### メニュータブ関連
- メニュータブにマウスオーバーで色が変わる（薄い青色→濃い青色）
- アクティブタブの左端ボーダー強調表示
- タブテキストのフォント太字化

### テーブル操作関連
- ヘッダークリックでソート（昇順・降順）
- ヘッダーホバー時の背景色変更
- 行ホバー時の薄いグレー背景表示
- セルダブルクリックでの編集モード移行
- 編集中セルの枠線強調表示

### ポップアップ関連
- ポップアップ表示時の薄いオーバーレイ
- ESCキー押下での即座な閉じる
- 外部クリックでの自動クローズ
- ポップアップ位置の画面端自動調整

### フィルタ関連
- 右クリックでのコンテキストメニュー表示
- フィルタ適用時のヘッダー「*」マーク表示
- チェックボックスのチェック状態変更

### ボタン・コントロール関連
- ボタンホバー時の背景色変更
- ボタンクリック時のアクティブ状態表示
- ドロップダウン矢印のアニメーション

### ステータス表示関連
- 同期状態インジケーターのフェードイン・フェードアウト
- ローディングスピナーの回転アニメーション
- 進捗率プログレスバーのアニメーション

---

このドキュメントは、kintone進捗管理アプリv10.3.3で実装されている全機能を詳細に記録したものです。各機能の実装箇所も併記しているため、開発・保守時の参考資料として活用できます。