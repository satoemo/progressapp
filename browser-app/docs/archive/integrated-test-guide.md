# 統合テストガイド - 2025-09-08

## 概要
Phase 2（CommandBus/QueryBus削除）完了後の全機能を確認する統合テストスイートです。

## テスト実行方法

### 方法1: ブラウザから実行
1. `test/test-api-mock.html?eventStore=mock` を開く
2. ヘッダーの「統合テスト実行（2025-09-08）」ボタンをクリック
3. F12でコンソールを開いて結果を確認

### 方法2: コンソールから実行
```javascript
// ブラウザコンソールで実行
runIntegratedTests()
```

## テスト内容

### 1. Phase別テスト（5項目）
- **Phase A**: ApplicationFacade切り替えテスト
- **Phase B**: ServiceContainer簡素化テスト
- **Phase C**: 依存関係解除テスト
- **Phase D**: ファイル削除テスト
- **Phase E**: クリーンアップテスト

### 2. 機能別テスト（4項目）
- **CRUD操作**: Create, Read, Update, Delete の基本動作
- **メモ機能**: セルメモの保存と取得
- **同期機能**: RealtimeSyncServiceの動作確認
- **UI表示**: テーブルとコンテナの表示確認

### 3. パフォーマンステスト（3段階）
- **少量データ**: 10件のCRUD操作
- **中量データ**: 100件のCRUD操作
- **大量データ**: 500件のCRUD操作
- **メモリ使用量**: JavaScriptヒープサイズ測定

### 4. エッジケーステスト（5項目）
- **空データ処理**: 空のオブジェクトでの作成
- **特殊文字処理**: 特殊文字を含むデータ
- **長文処理**: 1000文字の長文データ
- **存在しないID**: 不正なIDでの操作
- **同時実行**: 10件の同時作成

## 期待される結果

### 成功基準
- すべてのPhaseテスト: PASS
- すべての機能テスト: PASS
- パフォーマンス: 500件で5ms/操作以下
- エッジケース: すべてPASS

### 現在の目標値
| テスト項目 | 目標 | 許容範囲 |
|-----------|------|----------|
| 成功率 | 100% | 95%以上 |
| 10件処理 | <1ms/操作 | <2ms/操作 |
| 100件処理 | <2ms/操作 | <3ms/操作 |
| 500件処理 | <5ms/操作 | <10ms/操作 |
| メモリ使用 | <100MB | <150MB |

## テスト結果の確認

### コンソール出力
```
================================================
              統合テスト結果サマリー
================================================
📊 テスト総数: XX
✅ 成功: XX
❌ 失敗: XX
📈 成功率: XX.X%
⏱️ 実行時間: XX.XX秒
================================================
```

### 詳細レポート
- Phase別テスト結果
- 機能別テスト結果
- パフォーマンステスト結果
- エッジケーステスト結果

### レポート保存場所
- **コンソール**: 実行結果の詳細表示
- **LocalStorage**: `test-report-[timestamp]` キーで保存

## トラブルシューティング

### テストが失敗する場合

#### 1. ストレージをクリア
```javascript
clearMockStorage()
```

#### 2. ページをリロード
```
Ctrl + F5（ハードリロード）
```

#### 3. 個別テストを実行
```javascript
// Phase別に実行
testPhaseA()
testPhaseB()
testPhaseC()
testPhaseD()
testPhaseE()
```

### パフォーマンスが遅い場合

#### 原因の特定
1. デベロッパーツールのPerformanceタブでプロファイリング
2. Memory使用量を確認
3. Network遅延を確認

#### 対策
1. 不要なデータをクリア
2. ブラウザキャッシュをクリア
3. 他のタブを閉じる

## テスト実行時間

### 通常環境
- **全テスト**: 約2-3分
- **Phase別テスト**: 約30秒
- **機能別テスト**: 約20秒
- **パフォーマンステスト**: 約60秒
- **エッジケーステスト**: 約30秒

### 注意事項
- 大量データテスト（500件）は時間がかかります
- メモリ使用量測定はChrome/Edge推奨
- 同時実行テストは負荷が高いので注意

## 次のステップ

### テストが全て成功した場合
1. 本番環境へのデプロイ準備
2. リリースノート作成
3. Phase 3の開始準備

### テストが失敗した場合
1. 失敗項目の詳細確認
2. バグ修正
3. 再テスト実施

## 更新履歴
- **2025-09-08**: 初版作成（Phase 2完了後）
- 統合テストスイート実装
- 全Phase（A-E）のテスト統合
- パフォーマンステスト追加
- エッジケーステスト追加